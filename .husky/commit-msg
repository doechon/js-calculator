#!/usr/bin/env sh

# –ù–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–¥ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è issues
COMMIT_MSG=$(cat "$1")

if echo "$COMMIT_MSG" | grep -q "^fix: #[0-9]"; then
    ISSUE_NUMBER=$(echo "$COMMIT_MSG" | grep -o '#[0-9]*' | sed 's/#//')
    echo "üîß –ó–∞–∫—Ä—ã–≤–∞—é issue #$ISSUE_NUMBER..."
    gh issue close "$ISSUE_NUMBER" --comment "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤: $COMMIT_MSG"
fi

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π commitlint
npx --no -- commitlint --edit "$1"